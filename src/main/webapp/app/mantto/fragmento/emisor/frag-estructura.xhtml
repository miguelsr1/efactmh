<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:p="http://primefaces.org/ui"
              xmlns:jsf="http://xmlns.jcp.org/jsf">

    <h:form prependId="false" style="width: 100%;">
        <div class="col-12">
            <p:commandButton value="Agregar" 
                             process="@this" icon="pi pi-plus" style="margin-bottom: 1rem"
                             validateClient="true" styleClass="ui-button-outlined ui-button-success">
                <p:ajax event="dialogReturn" />
            </p:commandButton>
            
            <p:dataTable id="tblEstablecimientos" value="#{emisorView.lstEstable}" var="est"
                         reflow="true" size="small" tableStyle="table-layout: auto;"
                         emptyMessage="No se han agregado establecimientos">
                <p:column headerText="Nombre">
                    <p:outputLabel value="#{est.nombreSucursal}"/>
                </p:column>
                <p:column headerText="Código">
                    <p:outputLabel value="#{est.codigoEstable}"/>
                </p:column>
                <p:column headerText="Código MH">
                    <p:outputLabel value="#{est.codigoEstableMh}"/>
                </p:column>
                <p:column headerText="Tipo establecimiento">
                    <p:outputLabel value="#{est.tipoEstablecimiento}"/>
                </p:column>
                <p:column headerText="Activo">
                    <p:selectBooleanCheckbox value="#{est.activo}"/>
                </p:column>
                <p:column>
                    <p:commandButton icon="pi pi-trash" styleClass="rounded-button ui-button-danger ui-button-flat"
                                     update="tblEstablecimientos" process="@this">
                        <p:confirm header="Confirmar" message="¿Esta seguro de eliminar este item?" icon="pi pi-info-circle"/>
                    </p:commandButton>
                </p:column>
            </p:dataTable>
        </div>
    </h:form>

    <h:form prependId="false">
        <p:dialog id="dlgEstable" widgetVar="dlgEstable">
            <ui:include src="../establecimiento/frag-establecimiento.xhtml" />
        </p:dialog>
    </h:form>
</ui:component>